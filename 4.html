<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ashrama Caretaker - Medicine Reminder</title>

<style>
    body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(to right, #6a11cb, #2575fc);
        margin: 0;
    }

    header {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        color: white;
        padding: 22px;
        text-align: center;
        font-size: 32px;
        font-weight: 600;
    }

    .container {
        width: 90%;
        max-width: 900px;
        margin: 25px auto;
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    input, button, select {
        padding: 12px;
        width: 100%;
        margin-top: 10px;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #ccc;
    }

    button {
        cursor: pointer;
        background: #2f5fa3;
        border: none;
        color: white;
    }

    .alarm-btn {
        background: #ff9800;
        font-size: 18px;
        margin-bottom: 15px;
    }

    .wa-all-btn {
        background: #25D366;
        margin-top: 15px;
        font-size: 18px;
    }

    .person {
        background: #eef3f9;
        padding: 15px;
        margin: 12px 0;
        border-left: 7px solid #2f5fa3;
        border-radius: 12px;
    }
</style>
</head>

<body>

<header id="title"></header>

<div class="container">

    <label><b>Select Language</b></label>
    <select onchange="changeLanguage(this.value)">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="ta">Tamil</option>
        <option value="te">Telugu</option>
        <option value="kn">Kannada</option>
        <option value="ml">Malayalam</option>
        <option value="bn">Bengali</option>
        <option value="mr">Marathi</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="ar">Arabic</option>
        <option value="zh">Chinese</option>
    </select>

    <button class="alarm-btn" onclick="enableAlarmSound()" id="alarmBtn"></button>

    <h2 id="addTitle"></h2>

    <label id="nameLbl"></label>
    <input type="text" id="patientName">

    <label id="medLbl"></label>
    <input type="text" id="medicine">

    <label id="timeLbl"></label>
    <input type="time" id="medTime">

    <button onclick="addPerson()" id="addBtn"></button>

    <hr>

    <button class="wa-all-btn" onclick="sendAllWhatsApp()" id="waBtn"></button>

    <hr>

    <h2 id="listTitle"></h2>
    <div id="list"></div>

</div>

<script>
const caretakerNumber = "919353426054";
let people = JSON.parse(localStorage.getItem("people")) || [];
let alarmAudio, alarmEnabled = false, remindedToday = {};
let currentLang = "en";

/* ðŸŒ LANGUAGES */
const lang = {
    en:{title:"Ashrama Caretaker â€“ Medicine Reminder",add:"Add Elderly Person",name:"Name",med:"Medicine",time:"Medicine Time",addBtn:"Add",wa:"Send ALL Data to WhatsApp",list:"Elderly List",alarm:"Enable Alarm Sound",alert:"Medicine Time"},
    hi:{title:"à¤†à¤¶à¥à¤°à¤® à¤¦à¥‡à¤–à¤­à¤¾à¤² â€“ à¤¦à¤µà¤¾ à¤…à¤¨à¥à¤¸à¥à¤®à¤¾à¤°à¤•",add:"à¤µà¤°à¤¿à¤·à¥à¤  à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",name:"à¤¨à¤¾à¤®",med:"à¤¦à¤µà¤¾",time:"à¤¸à¤®à¤¯",addBtn:"à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",wa:"à¤µà¥à¤¹à¤¾à¤Ÿà¥à¤¸à¤à¤ª à¤­à¥‡à¤œà¥‡à¤‚",list:"à¤¸à¥‚à¤šà¥€",alarm:"à¤…à¤²à¤¾à¤°à¥à¤® à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‡à¤‚",alert:"à¤¦à¤µà¤¾ à¤•à¤¾ à¤¸à¤®à¤¯"},
    ta:{title:"à®†à®šà®¿à®°à®® à®ªà®°à®¾à®®à®°à®¿à®ªà¯à®ªà¯",add:"à®®à¯à®¤à®¿à®¯à®µà®°à¯ à®šà¯‡à®°à¯à®•à¯à®•",name:"à®ªà¯†à®¯à®°à¯",med:"à®®à®°à¯à®¨à¯à®¤à¯",time:"à®¨à¯‡à®°à®®à¯",addBtn:"à®šà¯‡à®°à¯",wa:"à®µà®¾à®Ÿà¯à®¸à¯à®…à®ªà¯ à®…à®©à¯à®ªà¯à®ªà¯",list:"à®ªà®Ÿà¯à®Ÿà®¿à®¯à®²à¯",alarm:"à®…à®²à®¾à®°à®®à¯ à®‡à®¯à®•à¯à®•à¯",alert:"à®®à®°à¯à®¨à¯à®¤à¯ à®¨à¯‡à®°à®®à¯"},
    te:{title:"à°†à°¶à±à°°à°® à°¸à°‚à°°à°•à±à°·à°£",add:"à°µà±ƒà°¦à±à°§à±à°¡à°¿à°¨à°¿ à°šà±‡à°°à±à°šà±",name:"à°ªà±‡à°°à±",med:"à°®à°‚à°¦à±",time:"à°¸à°®à°¯à°‚",addBtn:"à°œà±‹à°¡à°¿à°‚à°šà±",wa:"à°µà°¾à°Ÿà±à°¸à°¾à°ªà± à°ªà°‚à°ªà±",list:"à°œà°¾à°¬à°¿à°¤à°¾",alarm:"à°…à°²à°¾à°°à°‚ à°ªà±à°°à°¾à°°à°‚à°­à°¿à°‚à°šà±",alert:"à°®à°‚à°¦à± à°¸à°®à°¯à°‚"}
};

function changeLanguage(l){
    currentLang = l;
    title.innerText = lang[l].title;
    addTitle.innerText = lang[l].add;
    nameLbl.innerText = lang[l].name;
    medLbl.innerText = lang[l].med;
    timeLbl.innerText = lang[l].time;
    addBtn.innerText = lang[l].addBtn;
    waBtn.innerText = lang[l].wa;
    listTitle.innerText = lang[l].list;
    alarmBtn.innerText = lang[l].alarm;
}
changeLanguage("en");

/* ðŸ”” ALARM */
function enableAlarmSound(){
    alarmAudio = new Audio("https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg");
    alarmAudio.play().then(()=>{
        alarmAudio.pause();
        alarmEnabled = true;
        alert("Alarm Enabled");
    });
}

/* âœ… FIXED ADD PERSON */
function addPerson() {
    const nameInput = document.getElementById("patientName");
    const medInput = document.getElementById("medicine");
    const timeInput = document.getElementById("medTime");

    const name = nameInput.value.trim();
    const medicine = medInput.value.trim();
    const time = timeInput.value;

    if (!name || !medicine || !time) {
        alert("Fill all fields!");
        return;
    }

    people.push({ name, medicine, time });
    localStorage.setItem("people", JSON.stringify(people));
    render();

    nameInput.value = "";
    medInput.value = "";
    timeInput.value = "";
}

/* RENDER */
function render(){
    list.innerHTML = "";
    people.forEach(p=>{
        list.innerHTML += `
        <div class="person">
            <b>Name:</b> ${p.name}<br>
            <b>Medicine:</b> ${p.medicine}<br>
            <b>Time:</b> ${p.time}
        </div>`;
    });
}
render();

/* WHATSAPP */
function sendAllWhatsApp(){
    let msg="";
    people.forEach((p,i)=>{
        msg += `${i+1}. ${p.name} - ${p.medicine} at ${p.time}\n`;
    });
    window.open(`https://wa.me/${caretakerNumber}?text=${encodeURIComponent(msg)}`);
}

/* â° CHECK TIME */
setInterval(()=>{
    const now = new Date();
    const t = now.getHours().toString().padStart(2,"0")+":"+now.getMinutes().toString().padStart(2,"0");

    people.forEach(p=>{
        const key = p.name + p.time + now.toDateString();
        if(p.time === t && !remindedToday[key]){
            remindedToday[key] = true;
            if(alarmEnabled) alarmAudio.play();
            alert(`${lang[currentLang].alert}\n${p.name}\n${p.medicine}`);
        }
    });
},10000);
</script>

</body>
</html>
